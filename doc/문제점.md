# 문제점

## 1. 동시 요청 처리

### 1.1. 문 제

멀티스레딩 환경에서 동시에 API 요청이 들어왔을 때 이중 결제와 유저 머니 갱신 손실 두 가지 문제가 있습니다.

### 1.2. 해 결

이중 결제는 API 파라미터로 트랜잭션 번호를 받아 DB에 UNIQUE 컬럼으로 저장하여 해결했습니다.

갱신 손실은 해당 유저 레코드에 배타락을 걸어 순차적으로 처리되도록하여 해결했습니다.
